function addMediaInfo(o){var e="<li>";e+='<a href="'+o.link+'" target="_blank">',e+='<img src="'+o.images.thumbnail.url+'">',e+='<div class="media__des"><div class="media__inner"><div class="media__meta"><p class="media__caption"><small>',e+=o.caption.text,e+="</small></p></div></div></div>",e+="</a>",e+="</li>",$("#media-list").append(e)}function adduserInfo(o){var e=(o.username,"<li>");e+='<a href="https://www.instagram.com/'+o.username+'/" target="_blank">',e+="<p>"+o.full_name+"</p>",e+="<img src='"+o.profile_picture+"' width='70' height='70' >",e+="</a>",e+="</li>",$("#followed-list").append(e)}function runFunc(){navigator.geolocation?getLocation():alert("On your divice, you can't get your location.")}function getLocation(){var o={enableHighAccuracy:!1,timeout:8e3,maximumAge:5e3};navigator.geolocation.getCurrentPosition(successFunc,errorFunc,o)}function successFunc(o){var e=document.getElementById("map-canvas"),a=new google.maps.LatLng(o.coords.latitude,o.coords.longitude),t={zoom:15,center:a};map=new google.maps.Map(e,t),$.ajax({url:"https://api.instagram.com/v1/media/search?lat="+o.coords.latitude+"&lng="+o.coords.longitude+"&access_token="+exis_accesstoken,method:"get",dataType:"jsonp",success:function(e){iconPin(e.data,o.coords)}})}function iconPin(o,e){function a(){n();for(var o=0;o<s.length;o++)t(s[o],80*o,o),l.push(new google.maps.InfoWindow({content:c[o]}))}function t(o,e,a){window.setTimeout(function(){var e=new google.maps.Marker({position:o,map:map,title:"test",animation:google.maps.Animation.DROP});e.addListener("mouseover",function(){l[a].open(map,e)}),e.addListener("mouseout",function(){l[a].close()}),i.push(e)},e)}function n(){for(var o=0;o<i.length;o++)i[o].setMap(null);i=[]}for(var s=[],i=[],c=[],l=[],d=0;d<o.length;d++)s.push({lat:o[d].location.latitude,lng:o[d].location.longitude}),null!==o[d].caption?c.push('<div class="blow">'+o[d].caption.text+"</div>"):c.push('<div class="blow">no comment</div>');a()}function errorFunc(o){var e={0:"An unknown error occurred...",1:"Acquisition of location information was not permitted",2:"Position information could not be acquired due to radio wave conditions etc...",3:"time out"};console.log(e[o.code])}var url_self="https://api.instagram.com/v1/users/self/",url_users="https://api.instagram.com/v1/users/",url_self_media="https://api.instagram.com/v1/users/self/media/recent/",exis_accesstoken,map;$(function(){if(exis_accesstoken=localStorage.getItem("access_token"),!exis_accesstoken||"undefined"==exis_accesstoken){for(var o=new Object,e=location.hash.substring(1).split("#"),a=0;e[a];a++){var t=e[a].split("=");o[t[0]]=t[1],console.log(e[0])}localStorage.setItem("access_token",o.access_token)}$.ajax({url:url_self+"?access_token="+exis_accesstoken,method:"get",dataType:"jsonp",success:function(o){void 0!==o?($("#username").append(o.data.username),$("#name").append(o.data.full_name),$("#bio").append(o.data.bio),$(".profile-img").find("img").attr("src",o.data.profile_picture),$("#followed").append(o.data.counts.followed_by),$("#follows").append(o.data.counts.follows),$("#media").append(o.data.counts.media)):$(".profile-box").remove()}}),$.ajax({url:url_self+"followed-by?access_token="+exis_accesstoken,method:"get",dataType:"jsonp",success:function(o){if(o.data.length>=1){$("<h2>FOLLOWED USERS</h2>").prependTo("#followed-box");for(var e=0;o.data.length>e;e++)adduserInfo(o.data[e])}}}),$.ajax({url:url_self_media+"?access_token="+exis_accesstoken,method:"get",dataType:"jsonp",success:function(o){for(var e=0;o.data.length>e;e++)addMediaInfo(o.data[e])}}),$("#sinofool-btn").on("click",function(){$.ajax({url:url_users+"1474272023/?access_token="+exis_accesstoken,method:"get",dataType:"jsonp",success:function(o){void 0!==o&&($(".profile-box").clone().addClass("sinofool").appendTo("#test-detail"),$("#username",".sinofool").html(o.data.username),$("#name",".sinofool").html(o.data.full_name),$("#bio",".sinofool").html(o.data.bio),$(".profile-img",".sinofool").find("img").attr("src",o.data.profile_picture),$("#followed",".sinofool").html(o.data.counts.followed_by),$("#follows",".sinofool").html(o.data.counts.follows),$("#media",".sinofool").html(o.data.counts.media))}})})});